// Generated by CoffeeScript 1.3.3
(function() {

  App.Timers = (function() {
    var runningTimers;

    runningTimers = {};

    function Timers(attributes) {
      this.attributes = attributes;
      return true;
    }

    Timers.statusReport = function() {
      var reportObject;
      return reportObject = {
        runningTimers: runningTimers
      };
    };

    Timers.startTimer = function(timerID, remainingTime) {
      var nowSecondsStart;
      nowSecondsStart = Math.round(new Date().getTime() / 1000);
      return runningTimers[timerID] = {
        startTime: nowSecondsStart,
        startCountdownTime: remainingTime,
        currentCountdownTime: remainingTime,
        timer: setInterval(function() {
          if (runningTimers[timerID].currentCountdownTime > 0) {
            runningTimers[timerID].currentCountdownTime--;
          } else {
            App.Timers.stopTimer(timerID);
          }
          return $('#' + timerID + '-time').html(runningTimers[timerID].currentCountdownTime);
        }, 1000)
      };
    };

    Timers.stopTimer = function(timerID) {
      var nowSecondsStop, timeDifference, timeElapsed;
      clearInterval(runningTimers[timerID].timer);
      nowSecondsStop = Math.round(new Date().getTime() / 1000);
      timeElapsed = runningTimers[timerID].startCountdownTime - runningTimers[timerID].currentCountdownTime;
      timeDifference = (nowSecondsStop - runningTimers[timerID].startTime) - timeElapsed;
      return console.log('Time drift: ' + timeDifference + ' on ' + timerID + ' in ' + timeElapsed + 'seconds.');
    };

    return Timers;

  })();

}).call(this);
